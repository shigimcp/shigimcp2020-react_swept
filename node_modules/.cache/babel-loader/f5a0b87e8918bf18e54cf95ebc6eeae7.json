{"ast":null,"code":"!function (r, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = e(require(\"react\")) : \"function\" == typeof define && define.amd ? define([\"react\"], e) : (r = r || self).ReactDynamicImport = e(r.React);\n}(this, function (r) {\n  \"use strict\";\n\n  function e(r) {\n    return (e = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (r) {\n      return typeof r;\n    } : function (r) {\n      return r && \"function\" == typeof Symbol && r.constructor === Symbol && r !== Symbol.prototype ? \"symbol\" : typeof r;\n    })(r);\n  }\n\n  function t() {\n    return (t = Object.assign || function (r) {\n      for (var e = 1; e < arguments.length; e++) {\n        var t = arguments[e];\n\n        for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (r[n] = t[n]);\n      }\n\n      return r;\n    }).apply(this, arguments);\n  }\n\n  function n(r, e) {\n    if (null == r) return {};\n\n    var t,\n        n,\n        o = function (r, e) {\n      if (null == r) return {};\n      var t,\n          n,\n          o = {},\n          a = Object.keys(r);\n\n      for (n = 0; n < a.length; n++) t = a[n], e.indexOf(t) >= 0 || (o[t] = r[t]);\n\n      return o;\n    }(r, e);\n\n    if (Object.getOwnPropertySymbols) {\n      var a = Object.getOwnPropertySymbols(r);\n\n      for (n = 0; n < a.length; n++) t = a[n], e.indexOf(t) >= 0 || Object.prototype.propertyIsEnumerable.call(r, t) && (o[t] = r[t]);\n    }\n\n    return o;\n  }\n\n  function o(r, e) {\n    return function (r) {\n      if (Array.isArray(r)) return r;\n    }(r) || function (r, e) {\n      if (!(Symbol.iterator in Object(r) || \"[object Arguments]\" === Object.prototype.toString.call(r))) return;\n      var t = [],\n          n = !0,\n          o = !1,\n          a = void 0;\n\n      try {\n        for (var c, i = r[Symbol.iterator](); !(n = (c = i.next()).done) && (t.push(c.value), !e || t.length !== e); n = !0);\n      } catch (r) {\n        o = !0, a = r;\n      } finally {\n        try {\n          n || null == i.return || i.return();\n        } finally {\n          if (o) throw a;\n        }\n      }\n\n      return t;\n    }(r, e) || function () {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }();\n  }\n\n  function a(r) {\n    return function (r) {\n      if (Array.isArray(r)) {\n        for (var e = 0, t = new Array(r.length); e < r.length; e++) t[e] = r[e];\n\n        return t;\n      }\n    }(r) || function (r) {\n      if (Symbol.iterator in Object(r) || \"[object Arguments]\" === Object.prototype.toString.call(r)) return Array.from(r);\n    }(r) || function () {\n      throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n    }();\n  }\n\n  var c = function (r) {\n    var e = r.name,\n        t = r.error.message;\n    return \"Unable to fetch module: \".concat(e, \".\\nError: \").concat(t, \".\");\n  },\n      i = function () {\n    return null;\n  };\n\n  return function (u) {\n    var f = u.loader,\n        l = u.isHOC,\n        y = void 0 !== l && l,\n        p = u.name,\n        m = u.placeholder,\n        d = void 0 === m ? i : m,\n        s = u.errorHandler,\n        b = void 0 === s ? c : s;\n    if (!f || f && \"function\" != typeof f) throw new Error(\"'loader' is required and should be of type 'function'.\");\n\n    function h(c) {\n      var i = r.useRef(!1),\n          u = o(r.useState(null), 2),\n          l = u[0],\n          m = u[1],\n          s = o(r.useState(null), 2),\n          h = s[0],\n          v = s[1],\n          w = c.hocArgs,\n          g = c.forwardedRef,\n          O = n(c, [\"hocArgs\", \"forwardedRef\"]);\n      return r.useEffect(function () {\n        i.current = !0;\n        var r = f(p);\n        if (!r || r && !(r instanceof Promise)) throw new Error(\"Expected 'loader' to return a 'Promise', but, it returned '\".concat(e(r), \"' instead.\"));\n        return r.then(function (r) {\n          if (i.current) {\n            var e = r.default || r;\n            m({\n              component: y ? e.apply(void 0, a(w)) : e\n            });\n          }\n        }).catch(function (r) {\n          i.current && v(r);\n        }), function () {\n          i.current = !1;\n        };\n      }, [w]), h ? r.createElement(b, {\n        error: h,\n        name: p\n      }) : l ? r.createElement(l.component, t({}, O, {\n        ref: g\n      })) : r.createElement(d, {\n        name: p\n      });\n    }\n\n    function v(e, n) {\n      return r.createElement(h, t({}, e, {\n        forwardedRef: n\n      }));\n    }\n\n    h.displayName = \"DynamicImport\".concat(y ? \":HOC\" : \"\", \"(\").concat(p || \"Unknown\", \")\"), v.displayName = \"DynamicImportFetcher\";\n    var w = r.forwardRef(v);\n    return y ? function () {\n      for (var e = arguments.length, n = new Array(e), o = 0; o < e; o++) n[o] = arguments[o];\n\n      function a(e, o) {\n        return r.createElement(h, t({}, e, {\n          forwardedRef: o,\n          hocArgs: n\n        }));\n      }\n\n      return a.displayName = \"DynamicImportHOCFetcher\", r.forwardRef(a);\n    } : w;\n  };\n});","map":{"version":3,"sources":["../src/index.js"],"names":["defaultErrorHandler","name","error","message","defaultPlaceholder","loader","isHOC","placeholder","Placeholder","errorHandler","ErrorHandler","Error","DynamicImport","props","isMounted","React","DynamicModule","setDynamicModule","fetchError","setFetchError","hocArgs","forwardedRef","rest","current","loaderPromise","Promise","then","m","mod","component","err","React.createElement","ref","displayName","DynamicImportFetcher","ComponentFetcher","args","DynamicImportHOCFetcher"],"mappings":"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","sourcesContent":["/* eslint-disable react/prop-types */\nimport * as React from 'react';\n\nconst defaultErrorHandler = ({ name, error: { message } }) =>\n  `Unable to fetch module: ${name}.\\nError: ${message}.`;\n\nconst defaultPlaceholder = () => null;\n\n/**\n * Dynamically load any react module(Component or an HOC)\n *\n * @example\n *  - Module loader function\n *      const loader = f => import(`./dynamic/${f}.js`);\n *  - Use dynamic module(Make sure to use it outside render method, else new component is rendered in each render)\n *      const RealComponent = DynamicImport({ name: 'realModuleName', loader }),\n *\n * @param {Object} options - Options passed to react dynamic import functions\n * @param {Function} options.loader - function which takes module name and returns promise to resolve module\n * @param {Boolean} [options.isHOC=false] - Is the module an HOC?\n * @param {String} [options.name] - Dynamic module to be fetched(Mostly it will be part of the module file name),\n *                                        optional if loader returns same component every time\n * @param {Component} [options.placeholder=defaultPlaceholder] - React component to be rendered until actual module is fetched\n *                                                               (You can add UX improvements like adding small delay before showing\n *                                                               loader inside your class/functional component)\n * @param {Component} [options.errorHandler=defaultErrorHandler] - React component to be rendered if fetching actual module fails.\n *                                                                 This will receive `name` and `error` object as `props`\n */\nconst DynamicImportWrapper = ({\n  loader,\n  isHOC = false,\n  name,\n  placeholder: Placeholder = defaultPlaceholder,\n  errorHandler: ErrorHandler = defaultErrorHandler,\n}) => {\n  if (!loader || (loader && typeof loader !== 'function')) {\n    throw new Error(\"'loader' is required and should be of type 'function'.\");\n  }\n\n  function DynamicImport(props) {\n    const isMounted = React.useRef(false);\n    const [DynamicModule, setDynamicModule] = React.useState(null);\n    const [fetchError, setFetchError] = React.useState(null);\n    const { hocArgs, forwardedRef, ...rest } = props;\n\n    React.useEffect(() => {\n      isMounted.current = true;\n      const loaderPromise = loader(name);\n\n      if (\n        !loaderPromise ||\n        (loaderPromise && !(loaderPromise instanceof Promise))\n      ) {\n        throw new Error(\n          `Expected 'loader' to return a 'Promise', but, it returned '${typeof loaderPromise}' instead.`,\n        );\n      }\n\n      // Async await increases the bundle size\n      loaderPromise\n        .then(mod => {\n          if (isMounted.current) {\n            const m = mod.default || mod;\n\n            // useState executes the function if functional component is passed\n            setDynamicModule({ component: isHOC ? m(...hocArgs) : m });\n          }\n        })\n        .catch(err => {\n          if (isMounted.current) {\n            setFetchError(err);\n          }\n        });\n\n      return () => {\n        isMounted.current = false;\n      };\n    }, [hocArgs]);\n\n    if (fetchError) {\n      return <ErrorHandler error={fetchError} name={name} />;\n    }\n\n    return DynamicModule ? (\n      <DynamicModule.component {...rest} ref={forwardedRef} />\n    ) : (\n      <Placeholder name={name} />\n    );\n  }\n\n  DynamicImport.displayName = `DynamicImport${isHOC ? ':HOC' : ''}(${name ||\n    'Unknown'})`;\n\n  function DynamicImportFetcher(props, ref) {\n    return <DynamicImport {...props} forwardedRef={ref} />;\n  }\n  DynamicImportFetcher.displayName = 'DynamicImportFetcher';\n\n  const ComponentFetcher = React.forwardRef(DynamicImportFetcher);\n\n  const HOCFetcher = (...args) => {\n    function DynamicImportHOCFetcher(props, ref) {\n      return <DynamicImport {...props} forwardedRef={ref} hocArgs={args} />;\n    }\n    DynamicImportHOCFetcher.displayName = 'DynamicImportHOCFetcher';\n\n    return React.forwardRef(DynamicImportHOCFetcher);\n  };\n\n  return isHOC ? HOCFetcher : ComponentFetcher;\n};\n\nexport default DynamicImportWrapper;\n"]},"metadata":{},"sourceType":"script"}